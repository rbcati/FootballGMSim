/*
 * NFLGM4 "Liquid Glass" Material 3 + OneUI 8 Theme
 * Premium glass morphism design with advanced visual effects
 */

/* Reset and Base */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root {
  /* Core Palette - Enhanced Dark Mode */
  --bg: #0a0c10;
  --bg-secondary: #161b22;
  --surface: rgba(22, 27, 34, 0.75);
  --surface-strong: rgba(30, 36, 44, 0.85);
  --surface-elevated: rgba(40, 46, 54, 0.9);
  --hairline: rgba(255, 255, 255, 0.08);
  --hairline-strong: rgba(255, 255, 255, 0.15);
  --text: #E6EDF3;
  --text-muted: #9FB0C2;
  --text-subtle: #7C8E9B;
  --accent: #0A84FF;
  --accent-hover: #409CFF;
  --accent-muted: rgba(10, 132, 255, 0.1);
  --danger: #FF453A;
  --success: #34C759;
  --warning: #FF9F0A;

  /* Glass Effects */
  --glass-bg: rgba(255, 255, 255, 0.05);
  --glass-border: rgba(255, 255, 255, 0.1);
  --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  --glass-blur: blur(20px);

  /* Spacing Scale */
  --space-1: 4px; --space-2: 8px; --space-3: 12px; --space-4: 16px;
  --space-5: 20px; --space-6: 24px; --space-8: 32px; --space-10: 40px;
  --space-12: 48px; --space-16: 64px;

  /* Border Radius */
  --radius-sm: 8px; --radius-md: 12px; --radius-lg: 16px;
  --radius-xl: 20px; --radius-2xl: 24px; --radius-pill: 999px;

  /* Shadows - Layered for depth */
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.15);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.2);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.3);
  --shadow-xl: 0 16px 64px rgba(0, 0, 0, 0.4);

  /* Motion */
  --ease: cubic-bezier(0.2, 0.8, 0.2, 1);
  --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --dur-fast: 150ms; --dur: 200ms; --dur-slow: 300ms;

  /* Typography Scale */
  --text-xs: 0.75rem; --text-sm: 0.875rem; --text-base: 1rem;
  --text-lg: 1.125rem; --text-xl: 1.25rem; --text-2xl: 1.5rem;
  --text-3xl: 1.875rem; --text-4xl: 2.25rem;

  /* Add these missing variables */
  --success-bg: rgba(34, 197, 94, 0.1);
  --success-text: #22c55e;
  --error-bg: rgba(239, 68, 68, 0.1);
  --error-text: #ef4444;
  --warning-bg: rgba(245, 158, 11, 0.1);
  --warning-text: #f59e0b;
  --accent-rgb: 59, 130, 246;
  --success-rgb: 34, 197, 94;
  --error-rgb: 239, 68, 68;
  --warning-rgb: 245, 158, 11;
  
  /* Modal specific variables */
  --modal-bg: rgba(10, 12, 16, 0.95);
  --modal-backdrop: rgba(0, 0, 0, 0.7);
}

body.theme-light {
  --bg: #f5f7fb;
  --bg-secondary: #e9eef6;
  --surface: rgba(255, 255, 255, 0.85);
  --surface-strong: rgba(255, 255, 255, 0.95);
  --surface-elevated: rgba(255, 255, 255, 0.98);
  --hairline: rgba(0, 0, 0, 0.06);
  --hairline-strong: rgba(0, 0, 0, 0.12);
  --text: #0f172a;
  --text-muted: #334155;
  --text-subtle: #475569;
  --accent: #2563eb;
  --accent-hover: #1d4ed8;
  --accent-muted: rgba(37, 99, 235, 0.12);
  --glass-bg: rgba(255, 255, 255, 0.65);
  --glass-border: rgba(15, 23, 42, 0.08);
  --glass-shadow: 0 8px 32px rgba(15, 23, 42, 0.16);
  --modal-bg: rgba(255, 255, 255, 0.96);
  --modal-backdrop: rgba(0, 0, 0, 0.4);
}

/* Base Styles with Enhanced Background - Zen GM font size */
html, body {
  background:
    radial-gradient(1400px 1400px at 15% -15%, rgba(20, 35, 60, 0.4), transparent 65%),
    radial-gradient(1000px 1000px at 85% 15%, rgba(0, 120, 255, 0.08), transparent 55%),
    radial-gradient(800px 800px at 50% 100%, rgba(255, 255, 255, 0.02), transparent 50%),
    var(--bg);
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-size: 14px; /* Zen GM style - 14px base */
  min-height: 100vh;
  overflow-x: hidden;
}

/* Enhanced Layout System */
.layout {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: var(--space-6);
  padding: var(--space-6);
  padding-left: calc(200px + var(--space-6)); /* Account for nav sidebar */
  min-height: 100vh;
  margin-top: 0;
  transition: padding-left var(--dur-slow) var(--ease);
}

.layout.nav-collapsed {
  padding-left: var(--space-6);
}

.sidebar {
  position: sticky;
  top: var(--space-6);
  height: fit-content;
  z-index: 1000;
}

/* Premium Glass Card System */
.card {
  padding: var(--space-6);
  margin-bottom: var(--space-6);
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-xl);
  -webkit-backdrop-filter: var(--glass-blur);
  backdrop-filter: var(--glass-blur);
  box-shadow: var(--glass-shadow);
  position: relative;
  overflow: hidden;
  transition: all var(--dur) var(--ease);
}

.save-slot-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.save-slot {
  padding: var(--space-3);
  border: 1px solid var(--hairline);
  border-radius: var(--radius-md);
  background: var(--surface);
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  min-width: 0;
}

.save-slot.active {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px var(--accent-muted);
}

.save-slot-details {
  min-width: 0;
  word-break: break-word;
}

.save-slot-actions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.save-slot-actions .btn {
  flex: 1 1 150px;
}

.card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg,
    transparent,
    rgba(255, 255, 255, 0.2) 50%,
    transparent
  );
  opacity: 0;
  transition: opacity var(--dur) var(--ease);
}

.card:hover {
  transform: translateY(-2px);
  box-shadow:
    var(--glass-shadow),
    0 16px 48px rgba(0, 0, 0, 0.2);
  border-color: var(--hairline-strong);
}

.card:hover::before {
  opacity: 1;
}

/* Enhanced Top Bar */
.topbar {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  padding: calc(var(--space-3) + env(safe-area-inset-top, 0px)) var(--space-4);
  padding-left: calc(var(--space-4) + env(safe-area-inset-left, 0px));
  padding-right: calc(var(--space-4) + env(safe-area-inset-right, 0px));
  background: var(--glass-bg);
  -webkit-backdrop-filter: var(--glass-blur);
  backdrop-filter: var(--glass-blur);
  border-bottom: 1px solid var(--hairline);
  position: sticky;
  top: 0;
  z-index: 1001;
}

.brand {
  font-weight: 700;
  font-size: 14px; /* Zen GM style */
  background: linear-gradient(135deg, var(--accent), var(--accent-hover));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Navigation Toggle Button */
.nav-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  padding: 0;
  background: transparent;
  border: 1px solid var(--hairline);
  border-radius: var(--radius-md);
  color: var(--text);
  cursor: pointer;
  transition: all var(--dur) var(--ease);
  flex-shrink: 0;
}

.nav-toggle:hover {
  background: var(--surface);
  border-color: var(--hairline-strong);
}

.nav-toggle:active {
  transform: scale(0.95);
}

/* Left Sidebar Navigation - Zen GM Style */
.nav-sidebar {
  position: fixed;
  left: 0;
  top: env(safe-area-inset-top, 0px);
  bottom: 0;
  width: 200px;
  background: var(--bg-secondary);
  border-right: 1px solid var(--hairline);
  z-index: 40;
  transition: transform var(--dur-slow) var(--ease);
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
  padding-bottom: env(safe-area-inset-bottom, 0px);
  transform: translateX(0);
  pointer-events: auto;
}

.nav-sidebar.collapsed {
  transform: translateX(-100%);
  pointer-events: none;
  opacity: 0.01;
}

.nav-menu {
  display: flex;
  flex-direction: column;
  padding: var(--space-2);
  gap: var(--space-1);
}

.nav-item {
  display: flex;
  align-items: center;
  padding: var(--space-2) var(--space-3);
  font-size: 13px; /* Zen GM style - 13px for nav items */
  font-weight: 400;
  color: var(--text-muted);
  text-decoration: none;
  border-radius: var(--radius-md);
  transition: all var(--dur) var(--ease);
  white-space: nowrap;
  min-height: 36px;
  cursor: pointer;
}

.nav-item:hover {
  background: var(--surface);
  color: var(--text);
}

.nav-item.active,
.nav-item[aria-current="page"] {
  background: var(--accent-muted);
  color: var(--accent);
  font-weight: 500;
}

/* Mobile styles for navigation */
@media (max-width: 768px) {
  .nav-sidebar {
    width: 220px;
    box-shadow: 4px 0 16px rgba(0, 0, 0, 0.3);
    background: rgba(14, 18, 25, 0.96);
    z-index: 50; /* Ensure it's above content but below modals */
  }

  .nav-sidebar.collapsed {
    transform: translateX(-100%);
    pointer-events: none; /* Prevent clicks when hidden */
  }

  .nav-sidebar:not(.collapsed) {
    transform: translateX(0);
    pointer-events: auto;
  }

  .layout {
    padding-left: var(--space-4);
    grid-template-columns: 1fr;
    gap: var(--space-4);
  }

  .layout.nav-collapsed {
    padding-left: var(--space-4);
  }

  .nav-item {
    font-size: 14px; /* Slightly larger on mobile for touch */
    min-height: 44px; /* iOS touch target size */
    padding: var(--space-3) var(--space-4);
  }

  .topbar {
    padding: var(--space-2) var(--space-3);
    z-index: 100; /* Ensure topbar is always visible */
  }

  .brand {
    font-size: 13px;
  }

  .nav-toggle {
    width: 44px;
    height: 44px;
    display: flex !important; /* Always show on mobile */
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: auto !important;
    z-index: 101 !important; /* Above everything */
    position: relative;
    background: var(--surface) !important;
    border: 1px solid var(--hairline) !important;
    border-radius: var(--radius-md) !important;
  }

  /* Add overlay when nav is open on mobile - using a separate element */
  .nav-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 49;
    pointer-events: auto;
    backdrop-filter: blur(2px);
    -webkit-backdrop-filter: blur(2px);
  }

  .nav-sidebar:not(.collapsed) ~ .nav-overlay,
  body.nav-open .nav-overlay {
    display: block;
  }

  /* Ensure nav sidebar is above overlay when open */
  .nav-sidebar:not(.collapsed) {
    z-index: 51;
  }
}

/* Premium Navigation Pills - Legacy (keep for compatibility) */
.nav-pills {
  display: flex;
  gap: var(--space-2);
  justify-content: center;
  background: var(--surface);
  border-radius: var(--radius-pill);
  padding: var(--space-1);
  border: 1px solid var(--hairline);
}

.nav-pill {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  height: 36px;
  padding: 0 var(--space-4);
  border-radius: var(--radius-pill);
  color: var(--text-muted);
  text-decoration: none;
  font-weight: 500;
  font-size: var(--text-sm);
  transition: all var(--dur) var(--ease);
  position: relative;
  overflow: hidden;
}

.nav-pill::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--accent), var(--accent-hover));
  opacity: 0;
  transition: opacity var(--dur) var(--ease);
  border-radius: var(--radius-pill);
}

.nav-pill:hover {
  color: var(--text);
  transform: translateY(-1px);
}

.nav-pill:hover::before {
  opacity: 0.1;
}

.nav-pill[aria-current="page"] {
  color: white;
  background: linear-gradient(135deg, var(--accent), var(--accent-hover));
  box-shadow: var(--shadow-sm);
}

/* Enhanced Button System */
.btn {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-5);
  border-radius: var(--radius-md);
  border: 1px solid var(--hairline);
  background: var(--glass-bg);
  -webkit-backdrop-filter: var(--glass-blur);
  backdrop-filter: var(--glass-blur);
  color: var(--text);
  font-weight: 500;
  font-size: var(--text-sm);
  cursor: pointer;
  transition: all var(--dur) var(--ease);
  position: relative;
  overflow: hidden;
  text-decoration: none;
}

.btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(255, 255, 255, 0.1);
  opacity: 0;
  transition: opacity var(--dur) var(--ease);
}

.btn:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
  border-color: var(--hairline-strong);
}

.btn:hover::before {
  opacity: 1;
}

.btn:active {
  transform: translateY(0) scale(0.98);
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
}

.btn.primary {
  background: linear-gradient(135deg, var(--accent), var(--accent-hover));
  border-color: var(--accent);
  color: white;
  box-shadow: var(--shadow-sm);
}

.btn.primary:hover {
  box-shadow: var(--shadow-lg);
  filter: brightness(1.1);
}

.btn.danger {
  background: linear-gradient(135deg, var(--danger), #FF6B5A);
  border-color: var(--danger);
  color: white;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none !important;
}

/* Enhanced Form Elements */
select, input[type="text"], input[type="number"] {
  background: var(--glass-bg);
  -webkit-backdrop-filter: var(--glass-blur);
  backdrop-filter: var(--glass-blur);
  border: 1px solid var(--hairline);
  color: var(--text);
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  transition: all var(--dur) var(--ease);
}

select:focus, input:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-muted);
}

select:disabled {
  background: var(--surface);
  color: var(--text-muted);
  cursor: not-allowed;
  opacity: 0.7;
}

/* Enhanced Table System */
.table-wrapper {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.table {
  width: 100%;
  border-collapse: collapse;
  background: var(--glass-bg);
  border-radius: var(--radius-lg);
  border: 1px solid var(--hairline);
  backdrop-filter: var(--glass-blur);
}

.table thead {
  background: var(--surface-strong);
}

.table th,
.table td {
  padding: var(--space-4);
  text-align: left;
  border-bottom: 1px solid var(--hairline);
  font-size: var(--text-sm);
}

.table th {
  color: var(--text);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-size: var(--text-xs);
}

.table td {
  color: var(--text-muted);
  font-weight: 400;
}

.table tbody tr {
  transition: all var(--dur-fast) var(--ease);
}

.table tbody tr:hover {
  background: rgba(255, 255, 255, 0.03);
}

.table tbody tr.selected {
  background: var(--accent-muted);
  border-left: 3px solid var(--accent);
}

.table tbody tr.selected:hover {
  background: var(--accent-muted);
}

.table tbody tr:last-child td {
  border-bottom: none;
}

/* Premium Modal System */
.modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.8);
  -webkit-backdrop-filter: blur(12px);
  backdrop-filter: blur(12px);
  z-index: 1000;
  opacity: 0;
  animation: modalFadeIn var(--dur) var(--ease) forwards;
}

.modal[hidden] {
  display: none !important;
  visibility: hidden;
  opacity: 0;
  pointer-events: none;
}

.modal:not([hidden]) {
  display: flex !important;
  visibility: visible;
  opacity: 1;
  pointer-events: auto;
}

/* Ensure game results modal is properly styled and closable */
#gameResultsModal {
  z-index: 10000;
}

#gameResultsModal .close {
  background: none;
  border: none;
  font-size: 28px;
  font-weight: bold;
  color: var(--text-muted);
  cursor: pointer;
  padding: 0;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-sm);
  transition: all var(--dur) var(--ease);
  line-height: 1;
}

#gameResultsModal .close:hover {
  background: var(--surface);
  color: var(--text);
  transform: scale(1.1);
}

#gameResultsModal .close:active {
  transform: scale(0.95);
}

/* Ensure modal content is scrollable on mobile */
.game-results-modal {
  max-height: 90vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

@media (max-width: 768px) {
  .game-results-modal {
    max-height: 95vh;
    margin: var(--space-2);
  }

  #gameResultsModal .close {
    width: 44px;
    height: 44px;
    font-size: 32px;
  }
}

.modal-card {
  background: var(--bg-secondary);
  border: 1px solid var(--hairline-strong);
  border-radius: var(--radius-2xl);
  padding: var(--space-8);
  box-shadow: var(--shadow-xl);
  width: 100%;
  max-width: 500px;
  display: flex;
  flex-direction: column;
  gap: var(--space-6);
  transform: scale(0.95);
  animation: modalSlideIn var(--dur) var(--ease-bounce) forwards;
}

@keyframes modalFadeIn {
  to { opacity: 1; }
}

@keyframes modalSlideIn {
  to { transform: scale(1); }
}

/* Enhanced Grid System */
.results-grid, .scouting-grid, .hof-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: var(--space-4);
}

.result-card, .rookie-card, .hof-card {
  background: var(--glass-bg);
  -webkit-backdrop-filter: var(--glass-blur);
  backdrop-filter: var(--glass-blur);
  padding: var(--space-5);
  border-radius: var(--radius-lg);
  border: 1px solid var(--hairline);
  border-left: 3px solid var(--accent);
  transition: all var(--dur) var(--ease);
}

.result-card:hover, .rookie-card:hover, .hof-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
  border-color: var(--hairline-strong);
}

/* Utility Classes */
.section { margin-bottom: var(--space-6); }
.row { display: flex; gap: var(--space-4); align-items: center; }
.spacer { flex: 1; }
.muted { color: var(--text-muted); }
.subtle { color: var(--text-subtle); }
.small { font-size: var(--text-sm); }
.mt { margin-top: var(--space-6); }
.mb { margin-bottom: var(--space-6); }

.grid {
  display: grid;
  gap: var(--space-6);
}

.grid.two {
  grid-template-columns: 1fr 1fr;
}

/* Enhanced Loading States */
.loading-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.9);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--hairline);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Responsive Design */
@media (max-width: 1024px) {
  .layout {
    grid-template-columns: 1fr;
    padding: var(--space-4);
    padding-left: calc(220px + var(--space-4));
  }

  .layout.nav-collapsed {
    padding-left: var(--space-4);
  }
  
  .sidebar {
    position: relative;
    order: -1;
  }
  
  .nav-pills {
    flex-wrap: wrap;
  }
}

@media (max-width: 768px) {
  :root {
    --space-6: 16px;
    --space-8: 24px;
  }
  
  .card {
    padding: var(--space-4);
    border-radius: var(--radius-lg);
  }
  
  .results-grid, .scouting-grid, .hof-grid {
    grid-template-columns: 1fr;
  }
  
  .table {
    font-size: var(--text-xs);
  }
  
  .table th,
  .table td {
    padding: var(--space-2) var(--space-3);
  }
}

/* Enhanced Accessibility */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Focus Styles */
*:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
  border-radius: var(--radius-sm);
}

/* Selection Styles */
::selection {
  background: var(--accent-muted);
  color: var(--text);
}

/* Scrollbar Styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--hairline);
  border-radius: var(--radius-pill);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--hairline-strong);
}

/* ============================================================================
   UI POLISH - Animations, Transitions, and Visual Enhancements
   ============================================================================ */

/* Smooth transitions for interactive elements */
.btn, button, .card, .modal-content, .nav-pill, .tab-btn {
  transition: all 0.2s ease;
}

.btn:hover, button:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.btn:active, button:active {
  transform: translateY(0) scale(0.98);
}

/* Card hover effects */
.card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Smooth modal animations */
.modal {
  animation: fadeIn 0.2s ease;
}

.modal-content {
  animation: slideUp 0.3s ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Game Event Overlays */
.game-event-overlay {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%) scale(0.5);
  opacity: 0;
  pointer-events: none;
  z-index: 2000;
  width: 100%;
  text-align: center;
  animation: overlayPopIn 1.5s ease-out forwards;
}

.game-event-overlay .event-text {
  font-size: 3rem;
  font-weight: 900;
  color: #fff;
  text-shadow: 0 4px 10px rgba(0,0,0,0.8);
  letter-spacing: 2px;
  text-transform: uppercase;
}

@keyframes overlayPopIn {
  0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
  20% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
  80% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
}

.game-event-overlay.touchdown .event-text { color: #FFD700; text-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
.game-event-overlay.field-goal .event-text { color: #34C759; text-shadow: 0 0 20px rgba(52, 199, 89, 0.5); }
.game-event-overlay.turnover .event-text { color: #FF453A; text-shadow: 0 0 20px rgba(255, 69, 58, 0.5); }
.game-event-overlay.safety .event-text { color: #FF9F0A; text-shadow: 0 0 20px rgba(255, 159, 10, 0.5); }
.game-event-overlay.sack .event-text { color: #FF9F0A; }
.game-event-overlay.big-play .event-text { color: #0A84FF; text-shadow: 0 0 20px rgba(10, 132, 255, 0.5); }

/* Play log item flash animations */
.play-item.play-touchdown {
  animation: flash-success 1s;
}
.play-item.play-turnover {
  animation: flash-danger 1s;
}

@keyframes flash-success {
  0% { background-color: rgba(52, 199, 89, 0.5); }
  100% { background-color: rgba(52, 199, 89, 0.1); }
}

@keyframes flash-danger {
  0% { background-color: rgba(255, 59, 48, 0.5); }
  100% { background-color: rgba(255, 59, 48, 0.1); }
}

/* ============================================
   Utility Classes
   ============================================ */

.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }

.mt-1 { margin-top: var(--space-1); }
.mt-2 { margin-top: var(--space-2); }
.mt-3 { margin-top: var(--space-3); }
.mt-4 { margin-top: var(--space-4); }
.mt-6 { margin-top: var(--space-6); }

.mb-1 { margin-bottom: var(--space-1); }
.mb-2 { margin-bottom: var(--space-2); }
.mb-3 { margin-bottom: var(--space-3); }
.mb-4 { margin-bottom: var(--space-4); }
.mb-6 { margin-bottom: var(--space-6); }

.p-1 { padding: var(--space-1); }
.p-2 { padding: var(--space-2); }
.p-3 { padding: var(--space-3); }
.p-4 { padding: var(--space-4); }
.p-6 { padding: var(--space-6); }

.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.gap-2 { gap: var(--space-2); }
.gap-4 { gap: var(--space-4); }

/* ============================================
   Live Game Field Visualization
   ============================================ */

.field-container {
  position: relative;
  width: 100%;
  height: 140px;
  background-color: #4a8f4a; /* Grass Green */
  background-image:
    /* Yard Lines - every ~8.33% */
    repeating-linear-gradient(90deg,
        transparent 0,
        transparent calc(8.333% - 1px),
        rgba(255, 255, 255, 0.3) calc(8.333% - 1px),
        rgba(255, 255, 255, 0.3) 8.333%
    ),
    /* Grass Pattern */
    repeating-linear-gradient(0deg, transparent, transparent 5px, rgba(0,0,0,0.05) 5px, rgba(0,0,0,0.05) 10px),
    repeating-linear-gradient(90deg, transparent, transparent 50px, rgba(0,0,0,0.02) 50px, rgba(0,0,0,0.02) 100px);
  border: 2px solid #fff;
  margin-bottom: 20px;
  border-radius: 4px;
  box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
  overflow: hidden;
}

.field-hash {
    position: absolute;
    top: 10px;
    bottom: 10px;
    width: 1px;
    pointer-events: none;
    z-index: 1;
}

.field-hash::before {
    content: '';
    position: absolute;
    top: 35%;
    left: -1px;
    width: 3px;
    height: 5px;
    background: rgba(255, 255, 255, 0.5);
}

.field-hash::after {
    content: '';
    position: absolute;
    bottom: 35%;
    left: -1px;
    width: 3px;
    height: 5px;
    background: rgba(255, 255, 255, 0.5);
}

.end-zone {
  position: absolute;
  top: 0; bottom: 0;
  width: 0;
  /* Placeholder for future enhancements */
}

.field-marker {
  position: absolute;
  top: 10px; bottom: 10px;
  width: 2px;
  z-index: 5;
  transition: left 0.5s ease;
}

.marker-los {
  background-color: #007bff; /* Blue line of scrimmage */
  box-shadow: 0 0 4px #007bff;
}

.marker-first-down {
  background-color: #ffc107; /* Yellow first down line */
  box-shadow: 0 0 4px #ffc107;
}

.ball {
  position: absolute;
  top: 50%;
  width: 12px;
  height: 8px;
  background: #8B4513; /* SaddleBrown */
  border-radius: 50%;
  transform: translate(-50%, -50%);
  z-index: 10;
  box-shadow: 0 2px 4px rgba(0,0,0,0.5);
  transition: left 1s ease-in-out, top 0.5s ease-in-out;
}

.ball::after {
  content: '';
  position: absolute;
  top: 1px; bottom: 1px;
  left: 50%;
  width: 2px;
  background: rgba(255,255,255,0.4); /* Laces */
  transform: translateX(-50%);
}

/* Score Animation */
@keyframes scorePulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.5); color: #28a745; text-shadow: 0 0 10px #28a745; }
  100% { transform: scale(1); }
}

.pulse-score {
  animation: scorePulse 0.5s ease-out;
}

   /* Game Juice & Feedback Animations
   ============================================ */

/* Screen Shake */
@keyframes shake {
  0% { transform: translate(1px, 1px) rotate(0deg); }
  10% { transform: translate(-1px, -2px) rotate(-1deg); }
  20% { transform: translate(-3px, 0px) rotate(1deg); }
  30% { transform: translate(3px, 2px) rotate(0deg); }
  40% { transform: translate(1px, -1px) rotate(1deg); }
  50% { transform: translate(-1px, 2px) rotate(-1deg); }
  60% { transform: translate(-3px, 1px) rotate(0deg); }
  70% { transform: translate(3px, 1px) rotate(-1deg); }
  80% { transform: translate(-1px, -1px) rotate(1deg); }
  90% { transform: translate(1px, 2px) rotate(0deg); }
  100% { transform: translate(1px, -2px) rotate(-1deg); }
}

.shake {
  animation: shake 0.5s;
  animation-iteration-count: 1;
}

/* Score/Notification Overlay */
@keyframes popIn {
  0% { transform: scale(0.1); opacity: 0; }
  60% { transform: scale(1.2); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}

.score-overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 3rem;
  font-weight: 900;
  color: #fff;
  text-shadow: 0 0 20px rgba(0,0,0,0.8), 0 0 10px var(--accent);
  z-index: 2000;
  pointer-events: none;
  animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  white-space: nowrap;
}

.score-overlay.positive {
    color: #4cd964; /* iOS Green */
    text-shadow: 0 0 20px rgba(0,0,0,0.8), 0 0 10px #4cd964;
}

.score-overlay.negative {
    color: #ff3b30; /* iOS Red */
    text-shadow: 0 0 20px rgba(0,0,0,0.8), 0 0 10px #ff3b30;
}

/* Score Flash */
@keyframes flash-score {
    0% { transform: scale(1); color: inherit; }
    50% { transform: scale(1.5); color: var(--accent); }
    100% { transform: scale(1); color: inherit; }
}

.pulse-score {
    animation: flash-score 0.5s ease-out;
}

/* Momentum Pulse */
@keyframes pulse-glow {
    0% { box-shadow: 0 0 5px rgba(255, 69, 58, 0.5); }
    50% { box-shadow: 0 0 20px rgba(255, 69, 58, 0.8); }
    100% { box-shadow: 0 0 5px rgba(255, 69, 58, 0.5); }
}

.momentum-pulse {
    animation: pulse-glow 1s infinite;
}

/* Streak / On Fire */
.streak-fire {
    color: #ff9500;
    text-shadow: 0 0 5px #ff3b30;
    animation: pulse-text-glow 0.5s infinite;
}

/* Game Over Overlay */
.game-over-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.85);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 1500;
    backdrop-filter: blur(5px);
    animation: fadeIn 0.5s ease-out;
}

.game-over-title {
    font-size: 3rem;
    font-weight: 900;
    margin-bottom: 20px;
    text-transform: uppercase;
    letter-spacing: 2px;
}

.game-over-score {
    font-size: 2rem;
    margin-bottom: 30px;
    font-family: monospace; /* Fallback */
    font-family: var(--font-mono);
}

/* Ensure fade-in is available globally */
.fade-in {
  animation: fadeIn 0.3s ease-out;
}

/* Hard Shake */
@keyframes shake-hard {
  0% { transform: translate(2px, 2px) rotate(0deg); }
  10% { transform: translate(-2px, -4px) rotate(-3deg); }
  20% { transform: translate(-6px, 0px) rotate(3deg); }
  30% { transform: translate(6px, 4px) rotate(0deg); }
  40% { transform: translate(2px, -2px) rotate(3deg); }
  50% { transform: translate(-2px, 4px) rotate(-3deg); }
  60% { transform: translate(-6px, 2px) rotate(0deg); }
  70% { transform: translate(6px, 2px) rotate(-3deg); }
  80% { transform: translate(-2px, -2px) rotate(3deg); }
  90% { transform: translate(2px, 4px) rotate(0deg); }
  100% { transform: translate(2px, -4px) rotate(-3deg); }
}

.shake-hard {
  animation: shake-hard 0.5s;
  animation-iteration-count: 1;
}

/* Streak Text */
.streak-text {
    font-weight: bold;
    font-size: 0.9em;
    color: #ff9500;
    text-shadow: 0 0 8px rgba(255, 59, 48, 0.6);
    animation: pulse-glow 0.8s infinite alternate;
}

@keyframes combo-pulse {
  0% { transform: scale(1); filter: brightness(1); }
  50% { transform: scale(1.2); filter: brightness(1.3); }
  100% { transform: scale(1); filter: brightness(1); }
}

.streak-text {
  animation: combo-pulse 0.5s ease-out infinite;
}

/* Game Over Banner */
.game-over-banner {
    background: rgba(0,0,0,0.9);
    padding: 20px 40px;
    border-radius: 12px;
    text-align: center;
    border: 2px solid rgba(255,255,255,0.1);
    box-shadow: 0 0 50px rgba(0,0,0,0.5);
    animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    max-width: 90%;
    width: 600px;
}

.game-over-banner h2 {
    font-size: 4rem;
    margin: 0 0 10px 0;
    text-transform: uppercase;
    letter-spacing: 4px;
    line-height: 1;
}

.game-over-banner.victory h2 {
    background: linear-gradient(to bottom, #4cd964, #28a745);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 0 10px rgba(40, 167, 69, 0.5));
}

.game-over-banner.defeat h2 {
    background: linear-gradient(to bottom, #ff3b30, #dc3545);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 0 10px rgba(220, 53, 69, 0.5));
}

.game-over-mvp {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid rgba(255,255,255,0.1);
}

.game-over-mvp .label {
    font-size: 0.8rem;
    color: #aaa;
    text-transform: uppercase;
    letter-spacing: 2px;
}

.game-over-mvp .player-name {
    font-size: 1.5rem;
    font-weight: bold;
    color: #fff;
    margin: 5px 0;
}

.game-over-mvp .player-stats {
    font-size: 1rem;
    color: #ddd;
}

.game-over-emoji {
    font-size: 5rem;
    margin-bottom: 10px;
}

@media (max-width: 768px) {
    .game-over-emoji {
        font-size: 3rem;
    }
    .game-over-banner h2 {
        font-size: 2.5rem;
    }
    .game-over-score {
        font-size: 2.5rem;
    }
}

/* Player Markers and Advanced Animation Support */
.player-markers {
    position: absolute;
    top: 0; bottom: 0; left: 0; right: 0;
    pointer-events: none;
    z-index: 8;
}

.player-marker {
    position: absolute;
    top: 50%;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    box-shadow: 0 1px 3px rgba(0,0,0,0.5);
    opacity: 0; /* Hidden by default */
    transition: opacity 0.2s, background-color 0.3s;
    border: 2px solid white;
    z-index: 9;
}

.marker-qb {
    background: #007bff;
    z-index: 10;
}

.marker-skill {
    background: #28a745;
    z-index: 10;
    width: 10px;
    height: 10px;
}

.marker-def {
    background: #dc3545; /* Red */
    z-index: 10;
    width: 11px;
    height: 11px;
}

/* Ensure ball is above markers */
.ball, .football-ball {
    z-index: 15;
}

/* Trajectory Helper Class (if needed for debugging) */
.trajectory-path {
    position: absolute;
    height: 2px;
    background: rgba(255, 255, 255, 0.2);
    transform-origin: left center;
    pointer-events: none;
}

/* ============================================
   Game Juice & Feedback Animations - Enhanced
   ============================================ */

/* Ball Animations */
@keyframes kickArc {
  0% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -600%) scale(1.8); z-index: 20; } /* High arc */
  100% { transform: translate(-50%, -50%) scale(1); }
}

@keyframes passArc {
  0% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -300%) scale(1.4); z-index: 20; } /* Lower arc */
  100% { transform: translate(-50%, -50%) scale(1); }
}

.ball.animate-kick {
  animation: kickArc 1.5s ease-in-out forwards; /* Match JS duration */
}

.ball.animate-pass {
  animation: passArc 1.0s ease-in-out forwards; /* Match JS duration */
}

/* Red Zone Visualization */
.field-container.red-zone {
  background-image:
    repeating-linear-gradient(90deg, transparent, transparent 9.5%, rgba(255,200,200,0.3) 10%),
    linear-gradient(to bottom, transparent 10%, rgba(139,0,0,0.1) 10%, rgba(139,0,0,0.1) 90%, transparent 90%);
  border-color: #ff4444;
  box-shadow: inset 0 0 30px rgba(139, 0, 0, 0.3);
  transition: all 0.5s ease;
}

/* Specific Event Overlays */
.score-overlay.field-goal {
  color: #FFD700; /* Gold */
  text-shadow: 0 0 20px #FFA500, 0 0 40px #FF4500;
  font-family: 'Arial Black', sans-serif;
  letter-spacing: 2px;
}

.score-overlay.turnover {
  color: #FFFFFF;
  background: #FF453A;
  text-shadow: 2px 2px 0px #8B0000;
  font-family: 'Courier New', monospace;
  font-weight: 900;
  border: 4px solid #fff;
  padding: 15px 30px;
  transform: translate(-50%, -50%) rotate(-5deg);
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

.score-overlay.safety {
  color: #FF9F0A;
  text-shadow: 0 0 15px #FF4500;
  border: 2px dashed #FF9F0A;
  padding: 10px 20px;
}

/* Enhanced Button Tactile Feedback */
.btn:active, button:active {
  transform: scale(0.96) translateY(1px) !important;
  box-shadow: inset 0 2px 5px rgba(0,0,0,0.2) !important;
  filter: brightness(0.95);
}

/* Smooth Transitions for Field */
.football-field-container, .field-container {
  transition: background-color 0.5s ease, box-shadow 0.5s ease;
}

/* --- Live Game Play Calling UI --- */
.play-call-prompt {
    margin-bottom: 10px;
    font-weight: bold;
    color: var(--accent);
}

.play-call-buttons {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.live-game-modal .play-call-buttons {
    flex-direction: column;
    gap: 8px;
}

.play-row {
    display: flex;
    gap: 5px;
    align-items: center;
}

.play-row span {
    font-size: 10px;
    color: var(--text-muted);
    min-width: 35px;
    display: inline-block;
}

.play-call-btn {
    padding: 10px 14px;
    border: 1px solid var(--hairline);
    background: var(--glass-bg);
    -webkit-backdrop-filter: var(--glass-blur);
    backdrop-filter: var(--glass-blur);
    box-shadow: var(--shadow-sm);
    color: var(--text);
    border-radius: var(--radius-md);
    cursor: pointer;
    font-size: 0.95em;
    font-weight: 500;
    flex: 1;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.play-call-btn:hover {
    background: var(--surface-strong);
    border-color: var(--accent);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.play-call-btn:active {
    transform: scale(0.98);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
}

.play-call-btn.selected {
    background: var(--accent);
    color: white;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--accent-muted);
}

.defense-row {
    border-top: 1px solid var(--hairline);
    padding-top: 8px;
    margin-top: 4px;
    width: 100%;
}

@media (max-width: 768px) {
    .play-call-buttons {
        flex-direction: column;
    }

    .play-row {
        width: 100%;
    }
}

/* ============================================
   Draft Reveal & Gem Modal Styles
   ============================================ */

.gem-reveal-modal {
    background: rgba(10, 12, 16, 0.98);
    backdrop-filter: blur(16px);
    z-index: 5000;
}

.reveal-card {
    background: linear-gradient(145deg, #1a1f2e, #11151f);
    border: 1px solid rgba(255,255,255,0.1);
    box-shadow: 0 0 40px rgba(0,0,0,0.6);
    border-radius: 16px;
    padding: 30px;
    width: 90%;
    max-width: 500px;
    text-align: center;
    position: relative;
    overflow: hidden;
    animation: popIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.reveal-card.gem-status {
    border-color: #34C759;
    box-shadow: 0 0 50px rgba(52, 199, 89, 0.3);
}

.reveal-card.bust-status {
    border-color: #FF453A;
    box-shadow: 0 0 50px rgba(255, 69, 58, 0.3);
}

.reveal-header h2 {
    font-size: 1.2rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--text-muted);
    margin-bottom: 20px;
}

.player-reveal-info h1 {
    font-size: 2.5rem;
    margin-bottom: 5px;
    background: linear-gradient(to right, #fff, #bbb);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.player-reveal-info p {
    font-size: 1.2rem;
    color: var(--accent);
    margin-bottom: 30px;
}

.reveal-badge {
    display: inline-block;
    padding: 10px 20px;
    border-radius: 50px;
    font-size: 1.5rem;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 30px;
    animation: popIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s backwards;
}

.reveal-badge.gem {
    background: rgba(52, 199, 89, 0.2);
    color: #34C759;
    border: 2px solid #34C759;
    box-shadow: 0 0 20px rgba(52, 199, 89, 0.4);
}

.reveal-badge.bust {
    background: rgba(255, 69, 58, 0.2);
    color: #FF453A;
    border: 2px solid #FF453A;
    box-shadow: 0 0 20px rgba(255, 69, 58, 0.4);
}

.reveal-badge.normal {
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    border: 1px solid rgba(255, 255, 255, 0.3);
}

.rating-reveal {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-bottom: 30px;
}

.rating-box {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.rating-box .label {
    font-size: 0.8rem;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 5px;
}

.rating-box .value {
    font-size: 2rem;
    font-weight: bold;
}

.rating-box .value.boosted {
    color: #34C759;
}

.rating-box .value.nerfed {
    color: #FF453A;
}

/* Sparkle Effect for Gems */
.reveal-card.gem-status::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 60%);
    animation: rotate 10s linear infinite;
    pointer-events: none;
    z-index: 0;
}

@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* ============================================
   Contract Negotiation & Gamble Animations
   ============================================ */

.modal-insult {
  animation: shake-horizontal 0.4s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
  border: 2px solid #ff4444; /* Red border reinforcement */
  background-color: #fff0f0; /* Subtle red tint */
}

@keyframes shake-horizontal {
  10%, 90% {
    transform: translate3d(-1px, 0, 0);
  }
  20%, 80% {
    transform: translate3d(2px, 0, 0);
  }
  30%, 50%, 70% {
    transform: translate3d(-4px, 0, 0);
  }
  40%, 60% {
    transform: translate3d(4px, 0, 0);
  }
}

.modal-gamble-accept {
  animation: gold-pulse 0.6s ease-out forwards;
  border: 2px solid #ffd700;
}

@keyframes gold-pulse {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.7);
  }
  50% {
    transform: scale(1.02); /* Slight pop */
    box-shadow: 0 0 20px 10px rgba(255, 215, 0, 0);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(255, 215, 0, 0);
  }
}

/* Combo Pop Animation */
@keyframes comboPop {
    0% { transform: scale(1); }
    50% { transform: scale(1.3); text-shadow: 0 0 15px currentColor; }
    100% { transform: scale(1); }
}

.combo-text-pop {
    animation: comboPop 0.3s ease-out;
}

/* Ball Shadow */
.ball-shadow {
  position: absolute;
  top: 50%;
  width: 12px;
  height: 4px;
  background: rgba(0, 0, 0, 0.4);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  z-index: 9;
  transition: left 1s ease-in-out, transform 0.2s ease;
  filter: blur(1px);
}

/* Play Calling Transitions */
.play-calling {
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.3s ease, transform 0.3s ease;
}

.play-calling.visible {
  opacity: 1;
  transform: translateY(0);
}

/* Pulse Text Glow */
@keyframes pulse-text-glow {
    0% { text-shadow: 0 0 5px currentColor; transform: scale(1); }
    50% { text-shadow: 0 0 20px currentColor, 0 0 10px currentColor; transform: scale(1.05); }
    100% { text-shadow: 0 0 5px currentColor; transform: scale(1); }
}

/* Player Marker Animations */
@keyframes pulse-marker {
  0% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
  50% { transform: translate(-50%, -50%) scale(1.3); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
}

.pulse-marker {
  animation: pulse-marker 1.5s infinite ease-in-out;
}

@keyframes bob {
  0%, 100% { transform: translate(-50%, -50%); }
  50% { transform: translate(-50%, -60%); }
}

.bob {
  animation: bob 0.5s infinite ease-in-out;
}

/* Smooth Fade Transitions */
.fade-out {
  opacity: 0 !important;
  transition: opacity 0.3s ease-out;
}

.fade-in {
  opacity: 1 !important;
  transition: opacity 0.3s ease-in;
}

/* Enhanced Field Marker Transitions */
.field-marker {
  /* Ensure smooth movement by default */
  transition: left 0.5s cubic-bezier(0.25, 0.1, 0.25, 1);
}

.ball {
  /* Ensure ball moves smoothly */
  transition: left 0.8s cubic-bezier(0.25, 0.1, 0.25, 1), top 0.5s ease-in-out;
}

/* Utility to force smooth transition if overridden */
.smooth-transition {
  transition: left 0.5s cubic-bezier(0.25, 0.1, 0.25, 1) !important;
}

/* Refined Pulse Score */
@keyframes scorePulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.4); filter: brightness(1.3); }
  100% { transform: scale(1); }
}
/* ============================================
   New UI Polish & Visual Feedback
   ============================================ */

/* Enhanced Overlay Icons & Styles */
.game-event-overlay.field-goal-made .event-text {
  color: #FFD700;
  text-shadow: 0 0 20px #FFA500;
}
.game-event-overlay.field-goal-made::before {
  content: 'üëü';
  display: block;
  font-size: 4rem;
  margin-bottom: 10px;
  animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.game-event-overlay.defense-stop .event-text {
  color: #FF453A;
  border: 4px solid #FF453A;
  background: rgba(0, 0, 0, 0.8);
  padding: 15px 30px;
  transform: rotate(-5deg);
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(255, 69, 58, 0.4);
}
.game-event-overlay.defense-stop::before {
  content: 'üõ°Ô∏è';
  display: block;
  font-size: 5rem;
  margin-bottom: 10px;
  filter: drop-shadow(0 0 10px rgba(255, 69, 58, 0.5));
}

.game-event-overlay.punt .event-text {
  color: #fff;
}
.game-event-overlay.punt::before {
  content: 'ü¶∂';
  display: block;
  font-size: 4rem;
  margin-bottom: 10px;
}

/* Drive Summary Overlay */
.game-event-overlay.drive-summary {
  background: rgba(0, 0, 0, 0.8);
  padding: 20px;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  width: auto;
  min-width: 300px;
  max-width: 80%;
}
.game-event-overlay.drive-summary .event-text {
  font-size: 1.5rem;
  color: #E6EDF3;
  text-transform: none;
  font-family: monospace;
  text-shadow: none;
  white-space: normal;
}

/* Enhanced Tactile Buttons */
.btn, .play-call-btn {
  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
}

.btn:hover, .play-call-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
  filter: brightness(1.05);
}

.btn:active, .play-call-btn:active {
  transform: scale(0.97) translateY(1px) !important;
  filter: brightness(0.95);
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1) !important;
}

.play-call-btn.selected {
  background: var(--accent);
  color: white;
  border-color: var(--accent);
  box-shadow: 0 0 0 2px var(--accent-muted);
}

/* Celebration Animations */
@keyframes celebrate-jump {
  0% { transform: translate(-50%, -50%) scale(1); }
  30% { transform: translate(-50%, -150%) scale(1.1); } /* Jump Up */
  50% { transform: translate(-50%, -50%) scale(0.9); } /* Land Squash */
  70% { transform: translate(-50%, -100%) scale(1.05); } /* Small Hop */
  100% { transform: translate(-50%, -50%) scale(1); }
}

.celebrate-jump {
  animation: celebrate-jump 0.8s ease-in-out;
}

@keyframes celebrate-spin {
    0% { transform: translate(-50%, -50%) rotate(0deg) scale(1); }
    50% { transform: translate(-50%, -50%) rotate(180deg) scale(1.2); }
    100% { transform: translate(-50%, -50%) rotate(360deg) scale(1); }
}

.celebrate-spin {
    animation: celebrate-spin 0.8s ease-in-out;
}

/* Player Marker Interactions */
@keyframes marker-bump {
  0% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(0.8); } /* Impact compression */
  100% { transform: translate(-50%, -50%) scale(1); }
}

.marker-collision {
  animation: marker-bump 0.2s ease-out;
}

@keyframes marker-jump {
  0% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(1.5); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
  100% { transform: translate(-50%, -50%) scale(1); }
}

.marker-catch {
  animation: marker-jump 0.4s ease-out;
}

/* New Physics & Impact Animations */
@keyframes spiral {
  0% { transform: translate(-50%, -50%) rotate(0deg) scale(1); }
  50% { transform: translate(-50%, -50%) rotate(360deg) scale(0.95); }
  100% { transform: translate(-50%, -50%) rotate(720deg) scale(1); }
}

.spiral {
  animation: spiral 0.8s linear infinite;
}

@keyframes sack-shake {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  25% { transform: translate(-55%, -55%) rotate(-5deg); }
  50% { transform: translate(-45%, -45%) rotate(5deg); }
  75% { transform: translate(-55%, -55%) rotate(-5deg); }
  100% { transform: translate(-50%, -50%) rotate(0deg); }
}


@keyframes momentum-max {
  0% { box-shadow: 0 0 10px #ff3b30, inset 0 0 10px #ff3b30; border-color: #fff; }
  50% { box-shadow: 0 0 30px #ff9500, inset 0 0 20px #ff9500; border-color: #ff9500; }
  100% { box-shadow: 0 0 10px #ff3b30, inset 0 0 10px #ff3b30; border-color: #fff; }
}

.momentum-max {
  animation: momentum-max 0.5s infinite;
  border: 2px solid white !important;
}


.sack-shake {
  animation: sack-shake 0.6s ease-out;
}

@keyframes tackle-collision {
  0% { transform: translate(-50%, -50%) scale(1); }
  40% { transform: translate(-50%, -50%) scale(0.8); } /* Compress */
  70% { transform: translate(-50%, -50%) scale(1.1); } /* Rebound */
  100% { transform: translate(-50%, -50%) scale(1); }
}

.tackle-collision {
  animation: tackle-collision 0.3s ease-out;
}


@keyframes pre-snap-set {
  0% { opacity: 0; transform: translate(-50%, -60%); }
  100% { opacity: 1; transform: translate(-50%, -50%); }
}

.pre-snap-set {
  animation: pre-snap-set 0.4s ease-out forwards;
}

/* --- New Visual Feedback Animations --- */

@keyframes kick-flash {
  0% { filter: brightness(2) scale(1.5); }
  100% { filter: brightness(1) scale(1); }
}

.kick-flash {
  animation: kick-flash 0.3s ease-out;
}

@keyframes endzone-pulse {
  0% { opacity: 0.8; }
  50% { opacity: 1; box-shadow: inset 0 0 40px currentColor; }
  100% { opacity: 0.8; }
}

.endzone-pulse {
  animation: endzone-pulse 1s infinite;
  z-index: 5; /* Ensure above field */
}

@keyframes shield-pop {
  0% { transform: scale(0.5); opacity: 0; border-width: 0px; }
  50% { transform: scale(1.2); opacity: 1; border-width: 4px; }
  100% { transform: scale(1); opacity: 1; border-width: 2px; }
}

/* Update Defense Stop to use Shield Pop */
.game-event-overlay.defense-stop::before {
  animation: shield-pop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* New Celebration Animations */
@keyframes celebrate-spike {
    0% { transform: translate(-50%, -50%) scale(1); }
    40% { transform: translate(-50%, -150%) scale(1.1); } /* Jump Up */
    60% { transform: translate(-50%, -150%) scale(1.1) rotate(-15deg); } /* Cock back */
    70% { transform: translate(-50%, -50%) scale(1.2) rotate(45deg); } /* Spike Down */
    80% { transform: translate(-50%, -50%) scale(0.9); } /* Land Squash */
    100% { transform: translate(-50%, -50%) scale(1); }
}

.celebrate-spike {
    animation: celebrate-spike 1.0s ease-in-out;
}

@keyframes celebrate-dance {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    25% { transform: translate(-60%, -50%) rotate(-10deg); }
    50% { transform: translate(-40%, -50%) rotate(10deg); }
    75% { transform: translate(-60%, -50%) rotate(-10deg); }
    100% { transform: translate(-50%, -50%) rotate(0deg); }
}

.celebrate-dance {
    animation: celebrate-dance 1.2s ease-in-out;
}

/* Combo Meter */
.combo-bar-container {
    width: 100%;
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    margin-top: 5px;
    overflow: hidden;
    display: flex;
}

.combo-bar-segment {
    flex: 1;
    height: 100%;
    background: transparent;
    border-right: 1px solid rgba(0,0,0,0.5);
    transition: background 0.3s ease;
}

.combo-bar-segment:last-child {
    border-right: none;
}

.combo-bar-segment.active {
    background: #FFD700;
    box-shadow: 0 0 5px #FFD700;
}

.combo-bar-segment.max {
    background: #ff4500;
    box-shadow: 0 0 10px #ff4500;
    animation: pulse-glow 0.5s infinite;
}

/* Command Center Footer */
.command-center {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: rgba(10, 12, 16, 0.95);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-top: 1px solid var(--accent);
    padding: 10px 20px;
    z-index: 2000;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 -4px 20px rgba(0,0,0,0.5);
    color: var(--text);
    font-size: 0.9rem;
    height: 60px; /* Fixed height for layout calculations if needed */
}

.command-center .info-group {
    display: flex;
    gap: 20px;
    align-items: center;
}

.command-center .info-item {
    display: flex;
    align-items: center;
    gap: 8px;
}

.command-center .info-label {
    color: var(--text-muted);
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.command-center .info-value {
    font-weight: bold;
    font-family: monospace;
    font-size: 1rem;
    color: var(--accent);
}

.command-center .btn-advance {
    background: linear-gradient(135deg, var(--accent), var(--accent-hover));
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    transition: all 0.2s;
    text-transform: uppercase;
    font-size: 0.85rem;
    letter-spacing: 0.5px;
}

.command-center .btn-advance:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.5);
    filter: brightness(1.1);
}

.command-center .btn-advance:active {
    transform: translateY(0);
}

/* Adjust main content padding so footer doesn't overlap */
body {
    padding-bottom: 70px;
}

/* Hide bottom nav on mobile if command center is active?
   Or stack them. Usually command center replaces bottom nav or sits above.
   For now, we let them coexist but ensure padding.
*/
@media (max-width: 768px) {
    .command-center {
        bottom: 60px; /* Sit above bottom nav (usually 60px height) */
        border-bottom: 1px solid var(--hairline);
    }
    body {
        padding-bottom: 130px; /* 60px nav + 60px footer + spacing */
    }
}

/* ============================================
   UI Polish - Tactile Feedback & New Animations
   ============================================ */

/* Unified Tactile Button Feedback */
.btn:active,
.play-call-btn:active,
.nav-item:active {
  transform: scale(0.96) translateY(1px) !important;
  box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2) !important;
  filter: brightness(0.95);
}

/* Animations for Field Effects */
@keyframes kick-trail {
  0% { transform: scale(1); opacity: 0.8; }
  100% { transform: scale(0.2); opacity: 0; }
}

@keyframes shield-pop {
  0% { transform: scale(0.5); opacity: 0; border-width: 0px; }
  50% { transform: scale(1.2); opacity: 1; border-width: 4px; }
  100% { transform: scale(1); opacity: 1; border-width: 2px; }
}

@keyframes goal-celebration {
  0% { transform: scale(1) rotate(0deg); }
  25% { transform: scale(1.3) rotate(-10deg); }
  50% { transform: scale(1.5) rotate(10deg); }
  75% { transform: scale(1.3) rotate(-10deg); }
  100% { transform: scale(1) rotate(0deg); }
}

/* Additional Event Classes */
.game-event-overlay.defense-stop::before {
  animation: shield-pop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.game-event-overlay.field-goal-made .event-text {
  animation: goal-celebration 1s ease-out;
  color: #FFD700;
  text-shadow: 0 0 20px #FFA500;
}

/* Special Game Event Overlays */
.game-event-overlay.two-point .event-text {
  color: #FFD700;
  text-shadow: 0 0 20px #FFA500;
  animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.game-event-overlay.two-point::before {
  content: '‚úåÔ∏è';
  display: block;
  font-size: 4rem;
  margin-bottom: 10px;
  animation: bounce 1s infinite;
}

.game-event-overlay.two-point-miss .event-text {
  color: #FF453A;
}
.game-event-overlay.two-point-miss::before {
  content: '‚ùå';
  display: block;
  font-size: 4rem;
  margin-bottom: 10px;
  animation: shake 0.5s;
}

.game-event-overlay.missed-xp .event-text {
  color: #FF453A;
}
.game-event-overlay.missed-xp::before {
  content: 'üö´';
  display: block;
  font-size: 4rem;
  margin-bottom: 10px;
  animation: shake 0.5s;
}

/* Additional Game Animations - Added by Day 2 Task */
@keyframes run-bob {
  0%, 100% { transform: translate(-50%, -50%); }
  50% { transform: translate(-50%, -60%); }
}

.run-bob {
  animation: run-bob 0.3s infinite ease-in-out;
}

@keyframes wobble-pass {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  25% { transform: translate(-50%, -50%) rotate(-5deg); }
  75% { transform: translate(-50%, -50%) rotate(5deg); }
  100% { transform: translate(-50%, -50%) rotate(0deg); }
}

.wobble-pass {
  animation: wobble-pass 0.4s infinite ease-in-out;
}

@keyframes slide-in-smooth {
  0% { opacity: 0; transform: translateX(-20px); }
  100% { opacity: 1; transform: translateX(0); }
}

.slide-in-smooth {
  animation: slide-in-smooth 0.5s ease-out forwards;
}

/* Ensure pulse-score is distinct */
@keyframes pulse-score-strong {
  0% { transform: scale(1); color: inherit; }
  50% { transform: scale(1.5); color: var(--accent); text-shadow: 0 0 20px var(--accent); font-weight: 900; }
  100% { transform: scale(1); color: inherit; }
}

.pulse-score-strong {
  animation: pulse-score-strong 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* --- New Player Action Animations --- */
@keyframes throw-motion {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  25% { transform: translate(-60%, -50%) rotate(-15deg) scale(0.9); } /* Wind up */
  50% { transform: translate(-40%, -50%) rotate(10deg) scale(1.1); } /* Release */
  100% { transform: translate(-50%, -50%) rotate(0deg) scale(1); }
}

.throw-animation {
  animation: throw-motion 0.5s ease-in-out;
}

@keyframes kick-follow-through {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  30% { transform: translate(-40%, -50%) rotate(15deg) scale(1.1); }
  60% { transform: translate(-50%, -50%) rotate(0deg) scale(1); }
  100% { transform: translate(-50%, -50%); }
}

.kick-follow-through {
  animation: kick-follow-through 0.6s ease-out;
}

/* ============================================
   Enhanced Visual Feedback (Kick, Goal, Save)
   ============================================ */

/* Generic Goal Style (Touchdown, Field Goal) */
.game-event-overlay.goal .event-text {
  color: #FFD700;
  text-shadow: 0 0 20px #FFA500, 0 0 40px #FF4500;
  font-family: 'Arial Black', sans-serif;
  letter-spacing: 2px;
  animation: goal-celebration 1s ease-out;
}

.game-event-overlay.goal::before {
  content: 'üôå'; /* Hands up */
  display: block;
  font-size: 5rem;
  margin-bottom: 10px;
  animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Specific Kick Style (Punt, Kickoff) */
.game-event-overlay.kick .event-text {
  color: #0A84FF;
  text-shadow: 0 0 15px #0056b3;
  font-family: 'Arial Black', sans-serif;
  letter-spacing: 1px;
}

.game-event-overlay.kick::before {
  content: 'ü¶∂'; /* Foot */
  display: block;
  font-size: 4rem;
  margin-bottom: 10px;
  animation: kick-flash 0.3s ease-out;
}

/* Generic Save Style (Turnover, Defense Stop, Safety) */
.game-event-overlay.save .event-text {
  color: #FF453A;
  border: 4px solid #FF453A;
  background: rgba(0, 0, 0, 0.85);
  padding: 15px 30px;
  transform: rotate(-5deg);
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(255, 69, 58, 0.6);
  font-family: 'Courier New', monospace;
  font-weight: 900;
}

.game-event-overlay.save::before {
  content: 'üõ°Ô∏è'; /* Shield */
  display: block;
  font-size: 5rem;
  margin-bottom: 10px;
  filter: drop-shadow(0 0 10px rgba(255, 69, 58, 0.5));
  animation: shield-pop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Enhancing Button States for tactile feel */
.control-btn:active, .btn:active {
  transform: scale(0.96) translateY(1px) !important;
  box-shadow: inset 0 2px 5px rgba(0,0,0,0.2) !important;
  filter: brightness(0.95);
}

.control-btn:hover, .btn:hover {
  filter: brightness(1.1);
  transform: translateY(-2px);
}

/* Fade Out Animation for View Transitions */
@keyframes fadeOut {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(-10px); }
}

.fade-out {
  animation: fadeOut 0.2s ease-out forwards !important;
  pointer-events: none; /* Prevent clicks during exit */
}

/* Quarter End Style */
.game-event-overlay.quarter-end .event-text {
  color: #fff;
  text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
  font-family: 'Arial Black', sans-serif;
  letter-spacing: 2px;
}
.game-event-overlay.quarter-end::before {
  content: '‚è±Ô∏è';
  display: block;
  font-size: 4rem;
  margin-bottom: 10px;
}

/* Handoff Animation - QB and RB interaction */
.handoff-meet {
    transform: translate(-50%, -50%) scale(0.8) !important;
    filter: brightness(1.2);
    transition: transform 0.3s ease-in-out;
    border-color: #ffd700; /* Gold highlight */
}

/* Blur Transition */
.blur-transition {
    filter: blur(5px);
    transition: filter 0.3s ease;
}

/* Huddle Break Animation */
@keyframes huddle-break {
    0% { transform: scale(0.5); opacity: 0; }
    50% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
}

.huddle-break {
    animation: huddle-break 0.5s ease-out;
}

/* Motion Blur Helper */
.blur-motion {
    filter: blur(2px);
    transition: filter 0.1s;
}

/* ============================================
   Fluidity & Animation Enhancements (Day 2)
   ============================================ */

/* Dive Animation for Touchdowns */
@keyframes dive-td {
  0% { transform: translate(-50%, -50%) scale(1); }
  30% { transform: translate(-50%, -150%) scale(1.1) rotate(-15deg); } /* Initial Leap */
  60% { transform: translate(-50%, -50%) scale(0.9) rotate(-5deg); } /* Impact */
  80% { transform: translate(-50%, -80%) scale(1.05) rotate(0deg); } /* Bounce */
  100% { transform: translate(-50%, -50%) scale(1); }
}

.dive-td {
  animation: dive-td 0.8s ease-out forwards;
  z-index: 20; /* Ensure on top */
}

/* Huddle Pulse for status text */
@keyframes huddle-pulse {
  0% { opacity: 0.6; transform: scale(0.98); }
  50% { opacity: 1; transform: scale(1.02); }
  100% { opacity: 0.6; transform: scale(0.98); }
}

.huddle-text {
  display: inline-block;
  margin-left: 8px;
  font-style: italic;
  font-weight: normal;
  color: var(--warning);
  animation: huddle-pulse 2s infinite ease-in-out;
  font-size: 0.9em;
}

/* Juke Animation Helper (CSS-based sway fallback) */
@keyframes juke-sway {
  0%, 100% { transform: translate(-50%, -50%) translateX(0); }
  25% { transform: translate(-50%, -50%) translateX(-4px); }
  75% { transform: translate(-50%, -50%) translateX(4px); }
}

.juke-move {
  animation: juke-sway 0.4s ease-in-out infinite;
}

/* Smooth Transitions for Non-Animated Updates */
.ball, .player-marker {
  transition: left 0.6s cubic-bezier(0.22, 1, 0.36, 1), top 0.6s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.3s ease;
}

/* Ensure animated elements disable transition temporarily via JS, but this base rule handles the 'walk back' */

/* ============================================
   UI Polish - Tactile Feedback & New Animations
   ============================================ */

/* Unified Tactile Button Feedback */
.btn:active,
.play-call-btn:active,
.nav-item:active {
  transform: scale(0.96) translateY(1px) !important;
  box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2) !important;
  filter: brightness(0.95);
}

/* Animations for Field Effects */
@keyframes kick-trail {
  0% { transform: scale(1); opacity: 0.8; }
  100% { transform: scale(0.2); opacity: 0; }
}

@keyframes shield-pop {
  0% { transform: scale(0.5); opacity: 0; border-width: 0px; }
  50% { transform: scale(1.2); opacity: 1; border-width: 4px; }
  100% { transform: scale(1); opacity: 1; border-width: 2px; }
}

@keyframes goal-celebration {
  0% { transform: scale(1) rotate(0deg); }
  25% { transform: scale(1.3) rotate(-10deg); }
  50% { transform: scale(1.5) rotate(10deg); }
  75% { transform: scale(1.3) rotate(-10deg); }
  100% { transform: scale(1) rotate(0deg); }
}

/* Additional Event Classes */
.game-event-overlay.defense-stop::before {
  animation: shield-pop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.game-event-overlay.field-goal-made .event-text {
  animation: goal-celebration 1s ease-out;
  color: #FFD700;
  text-shadow: 0 0 20px #FFA500;
}

/* Additional Game Animations - Added by Day 2 Task */
@keyframes run-bob {
  0%, 100% { transform: translate(-50%, -50%); }
  50% { transform: translate(-50%, -60%); }
}

.run-bob {
  animation: run-bob 0.3s infinite ease-in-out;
}

@keyframes wobble-pass {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  25% { transform: translate(-50%, -50%) rotate(-5deg); }
  75% { transform: translate(-50%, -50%) rotate(5deg); }
  100% { transform: translate(-50%, -50%) rotate(0deg); }
}

.wobble-pass {
  animation: wobble-pass 0.4s infinite ease-in-out;
}

@keyframes slide-in-smooth {
  0% { opacity: 0; transform: translateX(-20px); }
  100% { opacity: 1; transform: translateX(0); }
}

.slide-in-smooth {
  animation: slide-in-smooth 0.5s ease-out forwards;
}

/* Ensure pulse-score is distinct */
@keyframes pulse-score-strong {
  0% { transform: scale(1); color: inherit; }
  50% { transform: scale(1.5); color: var(--accent); text-shadow: 0 0 20px var(--accent); font-weight: 900; }
  100% { transform: scale(1); color: inherit; }
}

.pulse-score-strong {
  animation: pulse-score-strong 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* --- New Player Action Animations --- */
@keyframes throw-motion {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  25% { transform: translate(-60%, -50%) rotate(-15deg) scale(0.9); } /* Wind up */
  50% { transform: translate(-40%, -50%) rotate(10deg) scale(1.1); } /* Release */
  100% { transform: translate(-50%, -50%) rotate(0deg) scale(1); }
}

.throw-animation {
  animation: throw-motion 0.5s ease-in-out;
}

@keyframes kick-follow-through {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  30% { transform: translate(-40%, -50%) rotate(15deg) scale(1.1); }
  60% { transform: translate(-50%, -50%) rotate(0deg) scale(1); }
  100% { transform: translate(-50%, -50%); }
}

.kick-follow-through {
  animation: kick-follow-through 0.6s ease-out;
}

/* ============================================
   Enhanced Visual Feedback (Kick, Goal, Save)
   ============================================ */

/* Generic Goal Style (Touchdown, Field Goal) */
.game-event-overlay.goal .event-text {
  color: #FFD700;
  text-shadow: 0 0 20px #FFA500, 0 0 40px #FF4500;
  font-family: 'Arial Black', sans-serif;
  letter-spacing: 2px;
  animation: goal-celebration 1s ease-out;
}

.game-event-overlay.goal::before {
  content: 'üôå'; /* Hands up */
  display: block;
  font-size: 5rem;
  margin-bottom: 10px;
  animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Specific Kick Style (Punt, Kickoff) */
.game-event-overlay.kick .event-text {
  color: #0A84FF;
  text-shadow: 0 0 15px #0056b3;
  font-family: 'Arial Black', sans-serif;
  letter-spacing: 1px;
}

.game-event-overlay.kick::before {
  content: 'ü¶∂'; /* Foot */
  display: block;
  font-size: 4rem;
  margin-bottom: 10px;
  animation: kick-flash 0.3s ease-out;
}

/* Generic Save Style (Turnover, Defense Stop, Safety) */
.game-event-overlay.save .event-text {
  color: #FF453A;
  border: 4px solid #FF453A;
  background: rgba(0, 0, 0, 0.85);
  padding: 15px 30px;
  transform: rotate(-5deg);
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(255, 69, 58, 0.6);
  font-family: 'Courier New', monospace;
  font-weight: 900;
}

.game-event-overlay.save::before {
  content: 'üõ°Ô∏è'; /* Shield */
  display: block;
  font-size: 5rem;
  margin-bottom: 10px;
  filter: drop-shadow(0 0 10px rgba(255, 69, 58, 0.5));
  animation: shield-pop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Enhancing Button States for tactile feel */
.control-btn:active, .btn:active {
  transform: scale(0.96) translateY(1px) !important;
  box-shadow: inset 0 2px 5px rgba(0,0,0,0.2) !important;
  filter: brightness(0.95);
}

.control-btn:hover, .btn:hover {
  filter: brightness(1.1);
  transform: translateY(-2px);
}

/* Fade Out Animation for View Transitions */
@keyframes fadeOut {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(-10px); }
}

.fade-out {
  animation: fadeOut 0.2s ease-out forwards !important;
  pointer-events: none; /* Prevent clicks during exit */
}

/* Quarter End Style */
.game-event-overlay.quarter-end .event-text {
  color: #fff;
  text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
  font-family: 'Arial Black', sans-serif;
  letter-spacing: 2px;
}
.game-event-overlay.quarter-end::before {
  content: '‚è±Ô∏è';
  display: block;
  font-size: 4rem;
  margin-bottom: 10px;
}

/* Handoff Animation - QB and RB interaction */
.handoff-meet {
    transform: translate(-50%, -50%) scale(0.8) !important;
    filter: brightness(1.2);
    transition: transform 0.3s ease-in-out;
    border-color: #ffd700; /* Gold highlight */
}

/* Blur Transition */
.blur-transition {
    filter: blur(5px);
    transition: filter 0.3s ease;
}

/* Huddle Break Animation */
@keyframes huddle-break {
    0% { transform: scale(0.5); opacity: 0; }
    50% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
}

.huddle-break {
    animation: huddle-break 0.5s ease-out;
}

/* Motion Blur Helper */
.blur-motion {
    filter: blur(2px);
    transition: filter 0.1s;
}
